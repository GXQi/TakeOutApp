webpackJsonp([0],{0:function(t,s){},"134i":function(t,s){},"7yVV":function(t,s){},"9GTI":function(t,s){},"9n10":function(t,s){},AY8I:function(t,s){},Fywa:function(t,s){},GKON:function(t,s){},GRRz:function(t,s){},Jbmm:function(t,s){},M6Sr:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),n={name:"Star",props:{size:Number,score:Number},computed:{starType:function(){return"star-"+this.size},itemClass:function(){for(var t=[],s=Math.floor(2*this.score)/2,e=s%1!=0,i=Math.floor(s),n=0;n<i;n++)t.push("on");for(e&&t.push("half");t.length<5;)t.push("off");return t}}},a={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"star",class:this.starType},this._l(this.itemClass,function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})}))},staticRenderFns:[]};var o={name:"Curtain",components:{CurtainStar:e("VU/8")(n,a,!1,function(t){e("134i")},"data-v-4c205e3a",null).exports},data:function(){return{minusClass:["decrease","discount","special","invoice","guarantee"]}},props:{seller:Object},methods:{handleCurtainClick:function(){this.$emit("close")}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"curtain"},[e("div",{staticClass:"curtain-wrapper clearfix"},[e("div",{staticClass:"curtain-content"},[e("div",{staticClass:"curtain-title"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"curtain-star"},[e("curtain-star",{attrs:{size:48,score:t.seller.score}})],1),t._v(" "),e("div",{staticClass:"curtain-discount"},[t._m(0),t._v(" "),t.seller.supports?e("ul",{staticClass:"curtain-discountInfo"},t._l(t.seller.supports,function(s,i){return e("li",{key:i,staticClass:"discount-item"},[e("span",{staticClass:"minus",class:t.minusClass[s.type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])})):t._e()]),t._v(" "),e("div",{staticClass:"curtain-notice"},[t._m(1),t._v(" "),e("div",{staticClass:"curtain-noticeInfo"},[t._v(t._s(t.seller.bulletin))])])])]),t._v(" "),e("div",{staticClass:"curtain-close",on:{click:t.handleCurtainClick}},[e("i",{staticClass:"icon-close"})])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"info-title"},[s("div",{staticClass:"title-line border-bottom"}),this._v(" "),s("div",{staticClass:"curtain-titleMain"},[this._v("优惠信息")]),this._v(" "),s("div",{staticClass:"title-line border-bottom"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"info-title"},[s("div",{staticClass:"title-line border-bottom"}),this._v(" "),s("div",{staticClass:"curtain-titleMain"},[this._v("商家公告")]),this._v(" "),s("div",{staticClass:"title-line border-bottom"})])}]};var c=e("VU/8")(o,r,!1,function(t){e("jTr8")},"data-v-4cd58142",null).exports,l={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("transition",[this._t("default")],2)],1)},staticRenderFns:[]};var d=e("VU/8")({name:"FadeAnimation"},l,!1,function(t){e("Fywa")},"data-v-34680b88",null).exports,u={name:"Header",data:function(){return{showCurtain:!1,classes:[]}},props:{seller:{Object:Object}},components:{HeaderCurtain:c,FadeAnimation:d},methods:{handleBulletinClick:function(){this.showCurtain=!0},handleCurtainClose:function(){this.showCurtain=!1}},computed:{minusIcon:function(){return this.classMap[this.seller.supports[0].type]}},created:function(){this.classMap=["decrease","discount","special","invoice","guarantee"]}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-wrapper"},[t._m(0),t._v(" "),e("div",{staticClass:"header-content"},[e("div",{staticClass:"header-title"},[e("span",{staticClass:"brand"}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),e("div",{staticClass:"header-desc"},[t._v("\n        "+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n      ")]),t._v(" "),t.seller.supports?e("div",{staticClass:"header-discounts"},[e("span",{staticClass:"minus",class:t.minusIcon}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?e("div",{staticClass:"minus-count",on:{click:t.handleBulletinClick}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),t._v(" "),e("div",{staticClass:"bulletin-wrapper",on:{click:t.handleBulletinClick}},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]),t._v(" "),t._m(1),t._v(" "),e("fade-animation",[e("header-curtain",{directives:[{name:"show",rawName:"v-show",value:t.showCurtain,expression:"showCurtain"}],attrs:{seller:t.seller},on:{close:t.handleCurtainClose}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header-avatar"},[s("img",{staticClass:"header-img",attrs:{src:e("Wq3o")}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header-background"},[s("img",{attrs:{src:e("Wq3o"),width:"100%",height:"100%"}})])}]};var v={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tab"},[s("router-link",{staticClass:"tab-item border-bottom",attrs:{to:"/goods"}},[s("div",[this._v("商品")])]),this._v(" "),s("router-link",{staticClass:"tab-item border-bottom",attrs:{to:"/ratings"}},[s("div",[this._v("评论")])]),this._v(" "),s("router-link",{staticClass:"tab-item border-bottom",attrs:{to:"/seller"}},[s("div",[this._v("商家")])])],1)},staticRenderFns:[]};var f={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"content"},[this._t("default")],2)},staticRenderFns:[]};var p={name:"App",data:function(){return{goods:{},ratings:{},seller:{}}},components:{HomeHeader:e("VU/8")(u,h,!1,function(t){e("x8bi")},"data-v-4ecb5c17",null).exports,HomeTab:e("VU/8")({name:"Tab"},v,!1,function(t){e("Jbmm")},"data-v-406e9ded",null).exports,HomeContent:e("VU/8")({name:"Content"},f,!1,function(t){e("7yVV")},"data-v-141ab748",null).exports},methods:{get:function(){var t=this;this.$http.get("/api/seller").then(function(s){0===(s=s.body).errno&&(t.seller=s.data)},function(){console.log("请求失败处理")})}},created:function(){this.get()}},m={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("home-header",{attrs:{seller:this.seller}}),this._v(" "),s("home-tab"),this._v(" "),s("home-content",[s("router-view",{attrs:{seller:this.seller}})],1)],1)},staticRenderFns:[]};var _=e("VU/8")(p,m,!1,function(t){e("gLRp")},null,null).exports,C=e("/ocq"),g=e("yKqG"),b={name:"GoodsMenu",props:{goods:{Object:Object,required:!0},scrollY:{Number:Number},listheight:{Array:Array}},data:function(){return{minusClass:["decrease","discount","special","invoice","guarantee"]}},methods:{selectMenu:function(t,s){this.$emit("menuindex",t)}},computed:{currentIndex:function(){for(var t=0;t<this.listheight.length;t++){var s=this.listheight[t],e=this.listheight[t+1];if(!e||this.scrollY>=s&&this.scrollY<e)return t}return 0}},mounted:function(){this.scroll=new g.a(this.$refs.wrapper,{click:!0})}},w={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"wrapper",staticClass:"menu"},[e("ul",{staticClass:"menu-ul"},t._l(t.goods,function(s,i){return e("li",{key:i,staticClass:"menu-item",class:{current:t.currentIndex===i},on:{click:function(s){t.selectMenu(i,s)}}},[e("span",{staticClass:"text border-bottom"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type > 0"}],staticClass:"minus",class:t.minusClass[s.type]}),t._v(t._s(s.name)+"\n      ")])])}))])},staticRenderFns:[]};var x=e("VU/8")(b,w,!1,function(t){e("kkwG")},"data-v-6b43136c",null).exports,y={render:function(){var t=this.$createElement;return(this._self._c||t)("transition",[this._t("default")],2)},staticRenderFns:[]};var F=e("VU/8")({name:"FadeScroll"},y,!1,function(t){e("9GTI")},"data-v-94778e7c",null).exports,k={name:"Cartcontrol",props:{food:{type:Object}},components:{FadeScroll:F},methods:{addCart:function(){this.food.count?this.food.count++:this.food.count=1},decreaseCart:function(){this.food.count?this.food.count--:this.food.count=0}},watch:{food:function(){console.log()}},created:function(){this.$set(this.food,"count",0)}},$={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("fade-scroll",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-decrease icon-remove_circle_outline",on:{click:t.decreaseCart}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),e("div",{staticClass:"cart-add icon-add_circle",on:{click:t.addCart}})],1)},staticRenderFns:[]};var E=e("VU/8")(k,$,!1,function(t){e("GRRz")},"data-v-463cf497",null).exports,R={render:function(){var t=this.$createElement;return(this._self._c||t)("transition",[this._t("default")],2)},staticRenderFns:[]};var P={name:"Detail",data:function(){return{showFlag:!1}},components:{FadeRight:e("VU/8")({name:"FadeRight"},R,!1,function(t){e("q8hc")},"data-v-d3728b6c",null).exports},props:{food:{type:Object}},methods:{show:function(){var t=this;this.showFlag=!0,this.$nextTick(function(){t.scroll?t.scroll.refresh():(t.scroll=new g.a(t.$refs.detail,{click:!0,bounce:!1}),console.log(t.scroll))})},hide:function(){this.showFlag=!1}}},V={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("fade-right",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],ref:"detail",staticClass:"detail"},[e("div",{staticClass:"detail-content border-bottom"},[e("div",{staticClass:"image-header"},[e("img",{attrs:{src:t.food.image}}),t._v(" "),e("div",{staticClass:"back",on:{click:t.hide}},[e("i",{staticClass:"icon-arrow_lift"})])]),t._v(" "),e("div",{staticClass:"detail-info"},[e("h2",{staticClass:"info-name"},[t._v(t._s(t.food.name))]),t._v(" "),e("div",{staticClass:"info-extra"},[e("span",[t._v("月售"+t._s(t.food.sellCount))]),e("span",[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),e("div",{staticClass:"info-price"},[e("span",[t._v("￥")]),t._v(" "),e("span",[t._v(t._s(t.food.price))]),t._v(" "),t.food.oldPrice?e("span",[t._v("￥"+t._s(t.food.oldPrice))]):t._e()]),t._v(" "),e("div",{staticClass:"add-shoppingcart"},[e("span",[t._v("加入购物车")])])]),t._v(" "),e("div",{staticClass:"desc-content border-topbottom"},[e("h2",{staticClass:"desc-name"},[t._v("商品介绍")]),t._v(" "),e("p",{staticClass:"desc-info"},[t._v(t._s(t.food.info))]),t._v(" "),e("p",{staticClass:"desc-info"},[t._v(t._s(t.food.info))])]),t._v(" "),e("div",{staticClass:"rating-content"},[e("h2",{staticClass:"rating-name"},[t._v("商品评价")])])])])])},staticRenderFns:[]};var N=e("VU/8")(P,V,!1,function(t){e("Oqr2")},"data-v-993b10ee",null).exports,M={name:"GoodsFoods",data:function(){return{listHeight:[],scrollY:0,currentIndex:0,selectedFood:{}}},props:{goods:{Object:Object},menuindex:{Number:Number}},components:{CartControl:E,FoodDetail:N},methods:{calculateHeight:function(){var t=this.$refs.wrapper.getElementsByClassName("food-item-hook"),s=0;this.listHeight.push(s);for(var e=0;e<t.length;e++){s+=t[e].clientHeight,this.listHeight.push(s)}this.$emit("listheight",[0,1033,1185,1306,1617,1833,2068,2379,2880,3571])},selectFood:function(t){this.selectedFood=t,this.$refs.food.show()}},computed:{selectFoods:function(){var t=[];return this.goods.forEach(function(s){console.log(s),s.foods.forEach(function(s){s.count&&t.push(s)})}),this.$emit("foodsarray",t),t}},watch:{menuindex:function(){var t=this.$refs.wrapper.getElementsByClassName("food-item-hook")[this.menuindex];this.scroll.scrollToElement(t,500)},scrollY:function(){this.$emit("indexchange",this.scrollY)},goods:function(){var t=[];this.goods.forEach(function(s){console.log(s),s.foods.forEach(function(s){s.count&&t.push(s)})}),this.$emit("select-foods",this.goods)}},mounted:function(){var t=this;this.scroll=new g.a(this.$refs.wrapper,{click:!0,probeType:3}),this.scroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))}),this.calculateHeight()}},T={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"wrapper",staticClass:"foods"},[e("ul",t._l(t.goods,function(s,i){return e("li",{key:i,staticClass:"food-item food-item-hook"},[e("h1",{staticClass:"food-title"},[t._v(t._s(s.name))]),t._v(" "),e("ul",{staticClass:"food-ul"},t._l(s.foods,function(s,i){return e("li",{key:i,staticClass:"foodList-item border-bottom",on:{click:function(e){t.selectFood(s)}}},[e("div",{staticClass:"food-img"},[e("img",{attrs:{width:"57",height:"57",src:s.icon}})]),t._v(" "),e("div",{staticClass:"food-info"},[e("h2",{staticClass:"food-name"},[t._v(t._s(s.name))]),t._v(" "),e("p",{staticClass:"food-desc"},[t._v(t._s(s.description))]),t._v(" "),e("div",{staticClass:"food-extra"},[e("span",[t._v("月售"+t._s(s.sellCount))]),e("span",[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),e("div",{staticClass:"food-price"},[e("span",[t._v("￥")]),t._v(" "),e("span",[t._v(t._s(s.price))]),t._v(" "),s.oldPrice?e("span",[t._v("￥"+t._s(s.oldPrice))]):t._e()]),t._v(" "),e("div",{staticClass:"cartcontrol-wrapper"},[e("cart-control",{attrs:{food:s}})],1)])])}))])})),t._v(" "),e("food-detail",{ref:"food",attrs:{food:t.selectedFood}})],1)},staticRenderFns:[]};var U=e("VU/8")(M,T,!1,function(t){e("Xq8w")},"data-v-88e7e96a",null).exports,H={name:"Shoppingcart",data:function(){return{}},props:{deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},selectFoods:{type:Array,default:function(){return[{price:5,count:5}]}}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count}),t},payDesc:function(){return 0===this.totalPrice?"￥"+this.minPrice+"元起送":this.minPrice>this.totalPrice?"还差￥"+(this.minPrice-this.totalPrice)+"元":"去结算"},payClass:function(){return this.minPrice>this.totalPrice?"not-enough":"enough"}}},O={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shoppingcart"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left"},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[e("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),e("div",{staticClass:"price border-right",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),t._v(" "),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payDesc))])])])])},staticRenderFns:[]};var G={name:"Goods",components:{GoodsMenu:x,GoodsFoods:U,ShoppingCart:e("VU/8")(H,O,!1,function(t){e("czbB")},"data-v-4152dcce",null).exports},props:{seller:{type:Object}},data:function(){return{goods:[],scrollY:0,listheight:[],menuindex:0,selectFoods:[]}},methods:{handleFoodsChange:function(t){this.scrollY=t},listHeightPara:function(t){this.listheight=t},getMenuIndex:function(t){this.menuindex=t},getFoodsArray:function(t){this.selectFoods=t,console.log(this.selectFoods)}},created:function(){var t=this;this.$http.get("/api/goods").then(function(s){0===(s=s.body).errno&&(t.goods=s.data)},function(){console.log("请求失败处理")})}},j={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("goods-menu",{attrs:{goods:t.goods,scrollY:t.scrollY,listheight:t.listheight},on:{menuindex:t.getMenuIndex}}),t._v(" "),e("goods-foods",{attrs:{goods:t.goods,menuindex:t.menuindex,"select-foods":t.selectFoods},on:{indexchange:t.handleFoodsChange,listheight:t.listHeightPara,foodsarray:t.getFoodsArray}}),t._v(" "),e("shopping-cart",{attrs:{"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice}})],1)},staticRenderFns:[]};var I=e("VU/8")(G,j,!1,function(t){e("AY8I")},"data-v-0f357798",null).exports,Y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ratings"},[this._v("\n  ratings\n")])},staticRenderFns:[]};var q=e("VU/8")({name:"Ratings"},Y,!1,function(t){e("T8T6")},"data-v-1d60638d",null).exports,A={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"seller"},[this._v("\n  seller\n")])},staticRenderFns:[]};var S=e("VU/8")({name:"Seller"},A,!1,function(t){e("GKON")},"data-v-70c69fc6",null).exports;i.a.use(C.a);var z=new C.a({routes:[{path:"/",redirect:"goods"},{path:"/goods",name:"Goods",component:I},{path:"/ratings",name:"Ratings",component:q},{path:"/seller",name:"Seller",component:S}]}),B=e("iDdd"),D=e.n(B),W=e("OolZ");e("9n10"),e("M6Sr"),e("R8f6");i.a.config.productionTip=!1,D.a.attach(document.body),i.a.use(W.a),new i.a({el:"#app",router:z,components:{App:_},template:"<App/>"})},Oqr2:function(t,s){},R8f6:function(t,s){},T8T6:function(t,s){},Wq3o:function(t,s,e){t.exports=e.p+"static/img/avatar.316c53d.png"},Xq8w:function(t,s){},czbB:function(t,s){},gLRp:function(t,s){},jTr8:function(t,s){},kkwG:function(t,s){},q8hc:function(t,s){},x8bi:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.34d81ed95b4e7b85f1c9.js.map